# ç™»å½•å­—æ®µä¸åŒ¹é…é—®é¢˜ï¼šå¯è§†åŒ–æŒ‡å—

## é—®é¢˜å±•ç¤º

### âŒ ä¿®å¤å‰çš„æƒ…å†µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æµè§ˆå™¨ (Reactå‰ç«¯)                    â”‚
â”‚                                                              â”‚
â”‚  ç”¨æˆ·åœ¨ç™»å½•è¡¨å•ä¸­è¾“å…¥:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ç”¨æˆ·å: admin                        â”‚                    â”‚
â”‚  â”‚ å¯†ç :   password                     â”‚                    â”‚
â”‚  â”‚ [ç™»å½•æŒ‰é’®]                           â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                 â†“                                             â”‚
â”‚  å‰ç«¯ JavaScript è°ƒç”¨:                                       â”‚
â”‚  authService.login({                                        â”‚
â”‚    username: "admin",      â—„â”€ å­—æ®µå: username              â”‚
â”‚    password: "password"                                      â”‚
â”‚  })                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ POST /login with CORS
                     â”‚ Content-Type: application/json
                     â”‚ {
                     â”‚   "username": "admin",
                     â”‚   "password": "password"
                     â”‚ }
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Vite Dev Server      â”‚
         â”‚ :5173 â†’ :8081 ä»£ç†   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               åç«¯ Go API æœåŠ¡å™¨ (:8081)                      â”‚
â”‚                                                              â”‚
â”‚  å¤„ç†å™¨ä»£ç :                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ func Login(c *gin.Context) {         â”‚                    â”‚
â”‚  â”‚   var req LoginRequest               â”‚                    â”‚
â”‚  â”‚   err := c.ShouldBindJSON(&req) â—„â”€â”¤ Gin ååºåˆ—åŒ–            â”‚
â”‚  â”‚ }                                    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â†“                                            â”‚
â”‚  ç»“æ„ä½“å®šä¹‰ (âŒ ä¿®å¤å‰):                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ type LoginRequest struct {           â”‚                    â”‚
â”‚  â”‚   UserID   string                    â”‚                    â”‚
â”‚  â”‚   `json:"user_id" binding:"required"`â”‚                    â”‚
â”‚  â”‚            â–²                          â”‚                    â”‚
â”‚  â”‚            â””â”€ JSON æ ‡ç­¾è¯´æ˜: æˆ‘æœŸæœ›çš„  â”‚                    â”‚
â”‚  â”‚              JSONé”®æ˜¯ "user_id"       â”‚                    â”‚
â”‚  â”‚                                     â”‚                    â”‚
â”‚  â”‚   Password string                    â”‚                    â”‚
â”‚  â”‚   `json:"password"`                  â”‚                    â”‚
â”‚  â”‚ }                                    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â†“                                            â”‚
â”‚         JSONæ˜ å°„è¿‡ç¨‹:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ æ¥æ”¶çš„ JSON:                          â”‚                   â”‚
â”‚  â”‚ {                                    â”‚                   â”‚
â”‚  â”‚   "username": "admin"  â—„â”€ å‰ç«¯å‘é€   â”‚                   â”‚
â”‚  â”‚   "password": "password"             â”‚                   â”‚
â”‚  â”‚ }                                    â”‚                   â”‚
â”‚  â”‚                                      â”‚                   â”‚
â”‚  â”‚ æœŸæœ›çš„æ˜ å°„:                           â”‚                   â”‚
â”‚  â”‚ "user_id"   â†’ UserID å­—æ®µ   âŒ æ‰¾ä¸åˆ°  â”‚                   â”‚
â”‚  â”‚ "password"  â†’ Password å­—æ®µ  âœ… æ‰¾åˆ°   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â†“                                            â”‚
â”‚         âŒ JSONæ˜ å°„å¤±è´¥!                                      â”‚
â”‚                  â†“                                            â”‚
â”‚  å­—æ®µéªŒè¯ (binding:"required"):                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ UserID å­—æ®µå€¼ = "" (ç©ºå­—ç¬¦ä¸²)          â”‚                   â”‚
â”‚  â”‚ (å› ä¸º JSON ä¸­æ‰¾ä¸åˆ° "user_id" é”®)     â”‚                   â”‚
â”‚  â”‚                                      â”‚                   â”‚
â”‚  â”‚ binding:"required" æ£€æŸ¥:              â”‚                   â”‚
â”‚  â”‚ UserID = "" ? âŒ éªŒè¯å¤±è´¥!             â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â†“                                            â”‚
â”‚  è¿”å›é”™è¯¯å“åº”:                                                â”‚
â”‚  HTTP 400 Bad Request                                       â”‚
â”‚  {                                                          â”‚
â”‚    "error": "Key: 'LoginRequest.UserID'                    â”‚
â”‚              Error:Field validation for 'UserID'           â”‚
â”‚              failed on the 'required' tag"                 â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æµè§ˆå™¨ Console                 â”‚
â”‚                                        â”‚
â”‚  âŒ ç™»å½•å¤±è´¥!                          â”‚
â”‚     é”™è¯¯: Field validation for         â”‚
â”‚     'UserID' failed on the             â”‚
â”‚     'required' tag                     â”‚
â”‚                                        â”‚
â”‚  ç”¨æˆ·çœ‹åˆ°:                             â”‚
â”‚  - ç™»å½•æŒ‰é’®ä»ç„¶æ˜¾ç¤º                    â”‚
â”‚  - æ²¡æœ‰é‡å®šå‘                         â”‚
â”‚  - å¯èƒ½æ˜¾ç¤º "ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ä¿®å¤åçš„æƒ…å†µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æµè§ˆå™¨ (Reactå‰ç«¯)                    â”‚
â”‚                                                              â”‚
â”‚  ç”¨æˆ·åœ¨ç™»å½•è¡¨å•ä¸­è¾“å…¥:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ç”¨æˆ·å: admin                        â”‚                    â”‚
â”‚  â”‚ å¯†ç :   password                     â”‚                    â”‚
â”‚  â”‚ [ç™»å½•æŒ‰é’®]                           â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                 â†“                                             â”‚
â”‚  å‰ç«¯ JavaScript è°ƒç”¨:                                       â”‚
â”‚  authService.login({                                        â”‚
â”‚    username: "admin",      â—„â”€ å­—æ®µå: username              â”‚
â”‚    password: "password"                                      â”‚
â”‚  })                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ POST /login with CORS
                     â”‚ Content-Type: application/json
                     â”‚ {
                     â”‚   "username": "admin",  âœ… åŒ¹é…!
                     â”‚   "password": "password"
                     â”‚ }
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Vite Dev Server      â”‚
         â”‚ :5173 â†’ :8081 ä»£ç†   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               åç«¯ Go API æœåŠ¡å™¨ (:8081)                      â”‚
â”‚                                                              â”‚
â”‚  å¤„ç†å™¨ä»£ç :                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ func Login(c *gin.Context) {         â”‚                    â”‚
â”‚  â”‚   var req LoginRequest               â”‚                    â”‚
â”‚  â”‚   err := c.ShouldBindJSON(&req) â—„â”€â”¤ Gin ååºåˆ—åŒ–            â”‚
â”‚  â”‚ }                                    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â†“                                            â”‚
â”‚  ç»“æ„ä½“å®šä¹‰ (âœ… ä¿®å¤å):                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ type LoginRequest struct {           â”‚                    â”‚
â”‚  â”‚   Username string       â—„â”€ ä¿®æ”¹äº†!   â”‚                    â”‚
â”‚  â”‚   `json:"username"  â—„â”€ ä¿®æ”¹äº†!       â”‚                    â”‚
â”‚  â”‚    binding:"required"`  âœ… ç°åœ¨åŒ¹é…   â”‚                    â”‚
â”‚  â”‚                                     â”‚                    â”‚
â”‚  â”‚   Password string                    â”‚                    â”‚
â”‚  â”‚   `json:"password"`                  â”‚                    â”‚
â”‚  â”‚ }                                    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â†“                                            â”‚
â”‚         JSONæ˜ å°„è¿‡ç¨‹:                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ æ¥æ”¶çš„ JSON:                          â”‚                   â”‚
â”‚  â”‚ {                                    â”‚                   â”‚
â”‚  â”‚   "username": "admin"   â—„â”€ å‰ç«¯å‘é€   â”‚                   â”‚
â”‚  â”‚   "password": "password"             â”‚                   â”‚
â”‚  â”‚ }                                    â”‚                   â”‚
â”‚  â”‚                                      â”‚                   â”‚
â”‚  â”‚ æœŸæœ›çš„æ˜ å°„:                           â”‚                   â”‚
â”‚  â”‚ "username" â†’ Username å­—æ®µ  âœ… æ‰¾åˆ°!  â”‚                   â”‚
â”‚  â”‚ "password" â†’ Password å­—æ®µ  âœ… æ‰¾åˆ°!  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â†“                                            â”‚
â”‚         âœ… JSONæ˜ å°„æˆåŠŸ!                                      â”‚
â”‚                  â†“                                            â”‚
â”‚  å­—æ®µéªŒè¯ (binding:"required"):                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Username å­—æ®µå€¼ = "admin"             â”‚                   â”‚
â”‚  â”‚ (ä» JSON ä¸­çš„ "username" é”®è·å¾—)     â”‚                   â”‚
â”‚  â”‚                                      â”‚                   â”‚
â”‚  â”‚ binding:"required" æ£€æŸ¥:              â”‚                   â”‚
â”‚  â”‚ Username = "admin" ? âœ… éªŒè¯é€šè¿‡!      â”‚                   â”‚
â”‚  â”‚ Password = "password" ? âœ… éªŒè¯é€šè¿‡!   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â†“                                            â”‚
â”‚         âœ… æ‰€æœ‰éªŒè¯é€šè¿‡!                                      â”‚
â”‚                  â†“                                            â”‚
â”‚  è®¤è¯é€»è¾‘ (ä¿®æ”¹å):                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ // è¿™é‡Œæ”¹ä¸ºä½¿ç”¨ req.Username          â”‚                   â”‚
â”‚  â”‚ user := db.Find("username = ?",       â”‚                   â”‚
â”‚  â”‚                 req.Username)         â”‚                   â”‚
â”‚  â”‚                                      â”‚                   â”‚
â”‚  â”‚ if user.CheckPassword(req.Password) { â”‚                   â”‚
â”‚  â”‚   token := GenerateToken(user.Name)  â”‚                   â”‚
â”‚  â”‚   return {"token": token}             â”‚                   â”‚
â”‚  â”‚ }                                    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                  â†“                                            â”‚
â”‚  è¿”å›æˆåŠŸå“åº”:                                                â”‚
â”‚  HTTP 200 OK                                                â”‚
â”‚  {                                                          â”‚
â”‚    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6..."               â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æµè§ˆå™¨ Console + UI            â”‚
â”‚                                        â”‚
â”‚  âœ… ç™»å½•æˆåŠŸ!                          â”‚
â”‚                                        â”‚
â”‚  localStorage ä¸­å­˜å‚¨:                 â”‚
â”‚  token: "eyJhbGciOiJIUzI1Ni..."       â”‚
â”‚                                        â”‚
â”‚  ç”¨æˆ·ç•Œé¢:                             â”‚
â”‚  - ç™»å½•æŒ‰é’®æ¶ˆå¤±                       â”‚
â”‚  - é‡å®šå‘åˆ°ä¸»é¡µ                       â”‚
â”‚  - æ˜¾ç¤º "æ¬¢è¿, admin!"                 â”‚
â”‚  - å¯ä»¥è®¿é—®æ‰€æœ‰åŠŸèƒ½                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” å­—æ®µåç§°å¯¹æ¯”

### ä¿®å¤å‰ âŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ç½®            â”‚ å­—æ®µå/æ ‡ç­¾   â”‚ çŠ¶æ€            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‰ç«¯å‘é€        â”‚ "username"   â”‚ âœ“ ä¸€è‡´           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åç«¯æœŸæœ›        â”‚ "user_id"    â”‚ âœ— ä¸åŒ           â”‚
â”‚ (JSON tag)      â”‚              â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åç«¯Goå­—æ®µ      â”‚ UserID       â”‚ âœ— å¤§å°å†™ä¸åŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜ å°„ç»“æœ        â”‚ âŒ å¤±è´¥      â”‚ å­—æ®µæœªæ‰¾åˆ°      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ éªŒè¯ç»“æœ        â”‚ âŒ å¤±è´¥      â”‚ å­—æ®µä¸ºç©ºå€¼      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¿®å¤å âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ç½®            â”‚ å­—æ®µå/æ ‡ç­¾   â”‚ çŠ¶æ€            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‰ç«¯å‘é€        â”‚ "username"   â”‚ âœ“ ä¸€è‡´           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åç«¯æœŸæœ›        â”‚ "username"   â”‚ âœ“ ä¸€è‡´           â”‚
â”‚ (JSON tag)      â”‚              â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åç«¯Goå­—æ®µ      â”‚ Username     â”‚ âœ“ ä¸€è‡´           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜ å°„ç»“æœ        â”‚ âœ… æˆåŠŸ      â”‚ å­—æ®µæ­£ç¡®æ˜ å°„    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ éªŒè¯ç»“æœ        â”‚ âœ… æˆåŠŸ      â”‚ å­—æ®µåŒ…å«å€¼      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ä¿®å¤æµç¨‹

```
å‘ç°é—®é¢˜
   â”‚
   â”œâ”€ ç—‡çŠ¶: "Field validation for 'UserID' failed"
   â”‚
   â””â”€â†’ è¯Šæ–­: å‰åç«¯å­—æ®µåä¸åŒ¹é…
             - å‰ç«¯å‘é€ "username"
             - åç«¯æœŸæœ› "user_id"
             â”‚
             â””â”€â†’ ä¿®å¤æ ¹å› :
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ æ›´æ–° LoginRequest ç»“æ„ä½“:        â”‚
                 â”‚                                  â”‚
                 â”‚ UserID â†’ Username                â”‚
                 â”‚ "user_id" â†’ "username"           â”‚
                 â”‚ req.UserID â†’ req.Username        â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â””â”€â†’ éªŒè¯:
                     âœ… è¿è¡Œ ./test-login.sh
                     âœ… ç™»å½•æˆåŠŸ
                     âœ… è·å¾— Token
                     âœ… ä¸€åˆ‡æ­£å¸¸!
```

---

## ğŸ’¡ å…³é”®è¦ç‚¹

### ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯?

1. **Go çš„ JSON æ˜ å°„è§„åˆ™**: ä½¿ç”¨ `json:"tag"` å®šä¹‰ JSON é”®å
2. **Gin æ¡†æ¶è¡Œä¸º**: `ShouldBindJSON()` ä½¿ç”¨ Go çš„ JSON æ˜ å°„è§„åˆ™
3. **å­—æ®µéªŒè¯**: `binding:"required"` æ£€æŸ¥æ˜ å°„åçš„å­—æ®µå€¼
4. **é“¾å¼å¤±è´¥**: å­—æ®µæ˜ å°„å¤±è´¥ â†’ å­—æ®µä¸ºç©º â†’ éªŒè¯å¤±è´¥

### ä¸ºä»€ä¹ˆä¿®å¤æœ‰æ•ˆ?

```
ä¿®å¤å‰:  JSON "username" â”€â”€Xâ”€â”€â†’ UserID å­—æ®µ (æ‰¾ä¸åˆ°!)
ä¿®å¤å:  JSON "username" â”€â”€âœ“â”€â”€â†’ Username å­—æ®µ (æ‰¾åˆ°!)
```

---

## ğŸš€ ç«‹å³å¼€å§‹ä¿®å¤

### æ­¥éª¤ 1: æ›´æ–°ä»£ç 

ç¼–è¾‘ `internal/api/handler/auth.go`ï¼Œä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š

```diff
  type LoginRequest struct {
-     UserID   string `json:"user_id" binding:"required" example:"admin"`
+     Username string `json:"username" binding:"required" example:"admin"`
      Password string `json:"password" binding:"required" example:"admin123"`
  }

- if err := h.db.Where("username = ?", req.UserID).First(&user).Error; err != nil {
+ if err := h.db.Where("username = ?", req.Username).First(&user).Error; err != nil {
```

### æ­¥éª¤ 2: é‡å¯åç«¯

```bash
# åœæ­¢æ—§çš„åç«¯ (Ctrl+C)

# å¯åŠ¨æ–°çš„åç«¯
make run-backend
```

### æ­¥éª¤ 3: éªŒè¯

```bash
./test-login.sh
```

**å°±è¿™æ ·ï¼** ğŸ‰

---

**ä¿®å¤å®Œæˆ**: 2026-02-10
**éš¾åº¦**: â­ ç®€å• (ä»…éœ€æ”¹ 2 è¡Œä»£ç )
**å½±å“**: ğŸ”´ ä¸¥é‡ (ç™»å½•åŠŸèƒ½æ— æ³•ä½¿ç”¨)
**è§£å†³**: âœ… å·²ä¿®å¤
